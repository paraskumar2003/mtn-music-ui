import{a as i,w as I}from"./chunk-UIGDSWPH-ChJgZbLH.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";const y=({children:t,variant:o="primary",size:g="md",loading:a=!1,className:c="",disabled:r,...p})=>{const l="font-semibold rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md active:shadow-sm transform hover:-translate-y-0.5 active:translate-y-0",d={primary:"bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white focus:ring-primary-500 border border-transparent",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400 focus:ring-primary-500",danger:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white focus:ring-red-500 border border-transparent",success:"bg-gradient-to-r from-accent-500 to-accent-600 hover:from-accent-600 hover:to-accent-700 text-white focus:ring-accent-500 border border-transparent"},u={sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base"},h=`${l} ${d[o]} ${u[g]} ${c}`;return e.jsx("button",{className:h,disabled:r||a,...p,children:e.jsxs("div",{className:"flex items-center justify-center",children:[a&&e.jsxs("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})})},L=({question:t,questionNumber:o,totalQuestions:g,onAnswer:a,onNext:c})=>{const[r,p]=i.useState(!1),[l,d]=i.useState(""),[u,h]=i.useState(null);i.useEffect(()=>{console.log(u)},[u]);const[b,q]=i.useState(null),[f,j]=i.useState(!1),[_,N]=i.useState(null),v=i.useRef(null),w=i.useRef(null),S=s=>{console.log("clicked"),h(s),a(s)},R=()=>{l.trim()&&(a(l.trim()),c(),d(""))},k=async()=>{if(!f)try{const s=await navigator.mediaDevices.getUserMedia({audio:!0,video:t.question_type==="video"}),n=new MediaRecorder(s),C=[];n.ondataavailable=m=>C.push(m.data),n.onstop=()=>{const m=new Blob(C,{type:t.question_type==="audio"?"audio/webm":"video/webm"});N(m),a(m),t.question_type==="audio"&&v.current&&(v.current.src=URL.createObjectURL(m)),t.question_type==="video"&&w.current&&(w.current.src=URL.createObjectURL(m))},n.start(),j(!0),q(n)}catch(s){console.error("Error accessing media devices:",s)}},z=()=>{b&&(b.stop(),j(!1))};return e.jsxs("div",{className:"max-w-2xl mx-auto bg-[#04061C] rounded-2xl shadow-xl border border-gray-100 p-10",children:[e.jsxs("div",{className:"flex justify-between mb-6 text-sm text-white-500",children:[e.jsxs("span",{children:["Question ",o]}),e.jsxs("span",{className:"capitalize",children:[t.dimension," â€¢ ",t.level]})]}),e.jsx("h2",{className:"text-xl font-semibold text-white-900 mb-6",dangerouslySetInnerHTML:{__html:t.prompt_html}}),t.image_url&&e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:t.image_url,alt:"Question",className:"rounded-lg border border-gray-200 max-h-64 object-contain"})}),t.audio_url&&e.jsx("div",{className:"mb-6",children:e.jsxs("audio",{controls:!0,className:"w-full",children:[e.jsx("source",{src:t.audio_url,type:"audio/mpeg"}),"Your browser does not support the audio tag."]})}),e.jsxs("div",{className:"mb-8",children:[t.question_type==="mcq"&&e.jsx("div",{className:"grid gap-4",children:t.options&&t.options.map(s=>{const n=u===s;return e.jsx("button",{onClick:()=>{S(s),console.log("clicked")},disabled:r,className:`px-4 py-3 rounded-xl border text-left transition-all duration-200
                    ${n?"bg-primary-600 text-white border-primary-700":"bg-white text-gray-800 border-gray-300 hover:bg-primary-50"}
                    disabled:opacity-80`,children:s},s)})}),t.question_type==="text"&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("textarea",{rows:4,placeholder:"Type your answer here...",className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-blue-400 text-white",value:l,onChange:s=>d(s.target.value),disabled:r}),!r&&e.jsx(y,{variant:"primary",size:"lg",onClick:R,children:"Submit Answer â†’"})]}),["audio","video","image"].includes(t.question_type)&&e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[(t.question_type==="audio"||t.question_type==="video")&&e.jsxs(e.Fragment,{children:[!f&&!r&&e.jsx(y,{variant:"primary",size:"lg",onClick:k,children:t.question_type==="audio"?"ðŸŽ™ï¸ Start Recording":"ðŸŽ¥ Start Recording"}),f&&e.jsx(y,{variant:"danger",size:"lg",onClick:z,children:"â¹ï¸ Stop Recording"}),_&&t.question_type==="audio"&&e.jsx("audio",{ref:v,controls:!0,className:"mt-4"}),_&&t.question_type==="video"&&e.jsx("video",{ref:w,controls:!0,className:"mt-4 w-full rounded-lg"})]}),t.question_type==="image"&&e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[!r&&e.jsxs(e.Fragment,{children:[e.jsx("input",{id:"cameraInput",type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:s=>{const n=s.target.files?.[0];n&&(a(n),N(n))}}),e.jsx(y,{variant:"primary",size:"lg",onClick:()=>{document.getElementById("cameraInput")?.click()},children:"ðŸ“¸ Capture / Upload Image"})]}),_&&e.jsx("img",{src:URL.createObjectURL(_),alt:"Captured",className:"mt-4 rounded-lg border border-gray-200 max-h-64 object-contain"})]})]})]}),!r&&t.question_type!=="text"&&e.jsx("div",{className:"text-center mt-6",children:e.jsx(y,{variant:"primary",size:"lg",onClick:c,children:"Next Question â†’"})})]})},x=[{question_id:"q21",dimension:"visual",level:"basic",type:"written",prompt_html:"Look at this 4-bar melody in C major. Count how many notes move by <b>step</b> (not skip).",image_url:"./assets/q21.png",audio_url:null,options:null,question_type:"text"},{question_id:"q22",dimension:"visual",level:"basic",type:"mcq",prompt_html:"Identify the <b>time signature</b> of this rhythm snippet.",image_url:"./assets/q22.png",audio_url:null,options:["2/4","3/4","4/4","6/8"],question_type:"mcq"},{question_id:"q23",dimension:"visual",level:"intermediate",type:"mcq",prompt_html:"Observe this chord staff â€” which <b>inversion</b> is written here?",image_url:"./assets/q23.png",audio_url:null,options:["Root","1st inversion","2nd inversion","3rd inversion"],question_type:"mcq"},{question_id:"q24",dimension:"visual",level:"intermediate",type:"written",prompt_html:"If this is in <b>G major</b>, which accquestion_idental note is missing in bar 3?",image_url:"./assets/q24.png",audio_url:null,options:null,question_type:"text"},{question_id:"q25",dimension:"visual",level:"intermediate",type:"image",prompt_html:"Copy this short 2-bar motif on paper and upload its <b>mirror image</b>.",image_url:"./assets/q25.png",audio_url:null,options:null,question_type:"image"},{question_id:"q26",dimension:"visual",level:"basic",type:"mcq",prompt_html:"The excerpt ends on a half-note tied to a quarter â€” what is the <b>total duration</b>?",image_url:"./assets/q26.png",audio_url:null,options:["2 beats","3 beats","4 beats","6 beats"],question_type:"mcq"},{question_id:"q27",dimension:"auditory",level:"basic",type:"audio",prompt_html:"Listen to this short clip. Tap along â€” is the pulse <b>duple</b> or <b>triple</b>?",image_url:null,audio_url:"./assets/q27.mp3",options:["Duple","Triple"],question_type:"mcq"},{question_id:"q28",dimension:"auditory",level:"basic",type:"audio",prompt_html:"After hearing two scales, choose which one feels <b>major</b>.",image_url:null,audio_url:"./assets/q28.mp3",options:["First","Second"],question_type:"mcq"},{question_id:"q29",dimension:"auditory",level:"intermediate",type:"audio",prompt_html:"Hum the rhythm you just heard and record your voice.",image_url:null,audio_url:"./assets/q21.mp3",options:null,question_type:"audio"},{question_id:"q30",dimension:"auditory",level:"intermediate",type:"audio",prompt_html:"Identify if the melody ascends, descends, or oscillates around a central tone.",image_url:null,audio_url:"./assets/q28.mp3",options:["Ascends","Descends","Oscillates"],question_type:"mcq"},{question_id:"q31",dimension:"auditory",level:"intermediate",type:"audio",prompt_html:"Two chords are played. Are they the <b>same</b> or <b>different</b> in quality (major/minor)?",image_url:null,audio_url:"./assets/q23.mp3",options:["Same","Different"],question_type:"mcq"},{question_id:"q32",dimension:"subconscious",level:"basic",type:"psychometric",prompt_html:"When faced with a new tune, what do you instinctively notice first?",image_url:null,audio_url:null,options:["Shape","Sound","Feel"],question_type:"mcq"},{question_id:"q33",dimension:"subconscious",level:"basic",type:"psychometric",prompt_html:"If a teammate plays wrong notes mquestion_id-performance, whatâ€™s your immediate reaction?",image_url:null,audio_url:null,options:["Ignore and continue","Stop and correct","Adjust quickly and adapt"],question_type:"mcq"},{question_id:"q34",dimension:"subconscious",level:"intermediate",type:"psychometric",prompt_html:"Youâ€™re asked to compose in 10 minutes â€” whatâ€™s your starting point?",image_url:null,audio_url:null,options:["Melody","Rhythm","Harmony","Mood"],question_type:"mcq"},{question_id:"q35",dimension:"subconscious",level:"basic",type:"psychometric",prompt_html:"Choose the sentence that fits you most.",image_url:null,audio_url:null,options:["I see music","I feel music","I hear music"],question_type:"mcq"},{question_id:"q36",dimension:"subconscious",level:"intermediate",type:"psychometric",prompt_html:"Which activity relaxes you more?",image_url:null,audio_url:null,options:["Writing","Listening","Organizing playlists"],question_type:"mcq"},{question_id:"q37",dimension:"rhythmic",level:"basic",type:"audio",prompt_html:"Tap along with the metronome (â™© = 100). Then double the tempo. Were you able to stay steady?",image_url:null,audio_url:"./assets/q27.mp3",options:["Yes","No","Partly"],question_type:"mcq"},{question_id:"q38",dimension:"rhythmic",level:"basic",type:"mcq",prompt_html:"Look at this 1-bar rhythm: eighth-eighth-quarter-quarter. Which beat feels strongest?",image_url:"./assets/q26.png",audio_url:null,options:["Beat 1","Beat 2","Beat 3","Beat 4"],question_type:"mcq"},{question_id:"q39",dimension:"rhythmic",level:"intermediate",type:"image",prompt_html:"You have 60 seconds to copy a 2-bar rhythm pattern â€” start when ready and upload your written image.",image_url:"./assets/q25.png",audio_url:null,options:null,question_type:"image"},{question_id:"q40",dimension:"rhythmic",level:"psychometric",type:"psychometric",prompt_html:"Rate yourself: how regularly do you practice or study (1 = chaotic, 5 = highly consistent)?",image_url:null,audio_url:null,options:["1","2","3","4","5"],question_type:"mcq"},{question_id:"q41",dimension:"rhythmic",level:"psychometric",type:"psychometric",prompt_html:"When working late nights, does your focus improve or decline sharply?",image_url:null,audio_url:null,options:["Improves","Declines","No change"],question_type:"mcq"}],A=I(function(){const[o,g]=i.useState(0),[a,c]=i.useState({}),[r,p]=i.useState(!1),l=h=>{const b=x[o];c(q=>({...q,[b.question_id]:h}))};i.useEffect(()=>{console.log({index:o})},[o]);const d=()=>{o<x.length-1?g(o+1):p(!0)},u=()=>{p(!1)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6 bg-[url('/assets/background-image.jpg')]",children:[e.jsx(L,{question:x[o],questionNumber:o+1,totalQuestions:x.length,onAnswer:l,onNext:d}),r&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-sm text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quiz Completed ðŸŽ‰"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Results will be shared on mail with you shortly."}),e.jsx("button",{onClick:u,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg",children:"Close"})]})})]})});export{A as default};
